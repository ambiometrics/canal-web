<html>
<head>
<link rel="stylesheet" type="text/css" href="res/style.css" />
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
<title>CAnal Web</title>
</head>
<body>
<div id="buttons">
<button id="initialStateDialogButton" title="Set the initial state for the computation">Initial State</button>
<div id="runButtonSet">
<button id="runButton" title="Run! You need to set a initial state first">Run</button>
<button id="runOptionsDialogButton" title="Run options">Options</button>
</div>
<div class="toolbarLabel">Rule:</div>
<input id="ruleNumber" name="ruleNumber" value="110" title="ECA rule to run"/>
<div class="toolbarLabel">Iterations:</div>
<input id="iterations" name="iterations" value="100" title="How many times the rule will run"/>
<button id="advancedRunDialogButton" title="Advanced run features">Advanced Run</button>
<button id="preferencesDialogButton" title="Preferences">Preferences</button>
<button id="aboutDialogButton"title="About this software and the author">About</button>
</div>
<div id="canvasViewport"></div>
<article id="initialStateDialogHTML"></article>
<article id="runOptionsDialogHTML"></article>
<article id="advancedRunDialogHTML"></article>
<article id="preferencesDialogHTML"></article>
<article id="aboutDialogHTML"></article>
</body>
<script type="text/javascript" src="js/AnimationManager.js"></script>
<script type="text/javascript" src="js/BinaryString.js"></script>
<script type="text/javascript" src="js/CellArray.js"></script>
<script type="text/javascript" src="js/CaChanger.js"></script>
<script type="text/javascript" src="js/CaChangerBasic.js"></script>
<script type="text/javascript" src="js/CaChangerMajority.js"></script>
<script type="text/javascript" src="js/CaChangerRange.js"></script>
<script type="text/javascript" src="js/CaController.js"></script>
<script type="text/javascript" src="js/CaModel.js"></script>
<script type="text/javascript" src="js/CaView.js"></script>
<script type="text/javascript" src="js/CellWorld.js"></script>
<script type="text/javascript" src="js/Rule.js"></script>
<script type="text/javascript">
var container = document.getElementById("canvasViewport");
var caController = new CaController(container, 4);

$(function() {

  $("#initialStateDialogHTML").load("html/DialogInitialState.html");
  $("#runOptionsDialogHTML").load("html/DialogRunOptions.html");
  $("#advancedRunDialogHTML").load("html/DialogAdvancedRun.html");
  $("#preferencesDialogHTML").load("html/DialogPreferences.html");
  $("#aboutDialogHTML").load("html/DialogAbout.html");
  
  $("#initialStateDialogButton")
    .button({ text: false, icons: { primary: "ui-icon-document" }})
    .click(function() { $("#initialStateDialog").dialog("open"); });

  $("#runButton")
    .button({ icons: { primary: "ui-icon-play" }})
    .click(function() {
      var iterations = parseInt($("#iterations").val());
      var ruleNumber = parseInt($("#ruleNumber").val());
      caController.run(ruleNumber, iterations);
  });

  $("#runOptionsDialogButton")
    .button({ text: false, icons: { primary: "ui-icon-triangle-1-s" }})
    .click(function() { $("#runOptionsDialog").dialog("open"); });

  $("#runButtonSet").buttonset({ items: "button" });
  
  $("#advancedRunDialogButton")
    .button({ text: false, icons: { primary: "ui-icon-wrench" }})
    .click(function() { $("#advancedRunDialog").dialog("open"); });

  $("#preferencesDialogButton")
    .button({ text: false, icons: { primary: "ui-icon-gear" }})
    .click(function() { $("#preferencesDialog").dialog("open"); });

  $("#aboutDialogButton")
    .button({ icons: { primary: "ui-icon-info" }})
    .click(function() { $("#aboutDialog").dialog("open"); });

  $("#ruleNumber").spinner({ min: 0, numberFormat: "d" });
  $("#iterations").spinner({ max: 999, min: 1, numberFormat: "d" });
  $(window).resize(
    function() {
      $("#canvasViewport").height((window.innerHeight - $("#buttons").height()) + "px");
  });

  $("#canvasViewport").height((window.innerHeight - $("#buttons").height()) + "px");

  $(document).tooltip().off("focusin focusout");
});
</script>
</html>